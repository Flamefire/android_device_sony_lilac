# PWD: packages/apps/Messaging

diff --git a/Android.bp b/Android.bp
index 9982616..09e4ad1 100644
--- a/Android.bp
+++ b/Android.bp
@@ -89,7 +89,6 @@ android_app {
     required: [
         "libframesequence",
         "libgiftranscode",
-        "com.android.messaging.allowlist",
     ],
     optimize: {
         obfuscate: true,
@@ -102,10 +101,3 @@ android_app {
     product_specific: true,
 }
 
-prebuilt_etc {
-    name: "com.android.messaging.allowlist",
-    product_specific: true,
-    sub_dir: "sysconfig",
-    src: "com.android.messaging.allowlist.xml",
-    filename_from_src: true,
-}
diff --git a/com.android.messaging.allowlist.xml b/com.android.messaging.allowlist.xml
deleted file mode 100644
index 6bc77a8..0000000
--- a/com.android.messaging.allowlist.xml
+++ /dev/null
@@ -1,19 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-     Copyright (C) 2019-2020 The LineageOS Project
-
-     Licensed under the Apache License, Version 2.0 (the "License");
-     you may not use this file except in compliance with the License.
-     You may obtain a copy of the License at
-
-          http://www.apache.org/licenses/LICENSE-2.0
-
-     Unless required by applicable law or agreed to in writing, software
-     distributed under the License is distributed on an "AS IS" BASIS,
-     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-     See the License for the specific language governing permissions and
-     limitations under the License.
--->
-<config>
-    <allow-in-power-save package="com.android.messaging" />
-</config>
diff --git a/src/com/android/messaging/datamodel/action/ActionServiceImpl.java b/src/com/android/messaging/datamodel/action/ActionServiceImpl.java
index d78bdc0..172e792 100644
--- a/src/com/android/messaging/datamodel/action/ActionServiceImpl.java
+++ b/src/com/android/messaging/datamodel/action/ActionServiceImpl.java
@@ -171,7 +171,7 @@ public class ActionServiceImpl extends JobIntentService {
                     (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
 
             if (delayMs < Long.MAX_VALUE) {
-                mgr.set(AlarmManager.ELAPSED_REALTIME_WAKEUP,
+                mgr.setAndAllowWhileIdle(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                         SystemClock.elapsedRealtime() + delayMs, pendingIntent);
             } else {
                 mgr.cancel(pendingIntent);

